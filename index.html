<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor Pro+ ✨ Premium Design Tool</title>
    <link rel="stylesheet" href="public/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Iconos Modernos -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
    <div id="public/app.js">
        <!-- Header Premium -->
        <header class="header">
            <div class="header-left">
                <div class="logo-container">
                    <div class="logo-icon">
                        <i class="ri-palette-line"></i>
                    </div>
                    <h1 class="logo">Editor<span class="logo-pro">Pro+</span></h1>
                    <div class="premium-badge">
                        <i class="ri-sparkling-2-fill"></i>
                        PREMIUM
                    </div>
                </div>
                <div class="file-menu">
                    <button class="menu-btn" id="new-btn">
                        <i class="ri-file-add-line"></i>
                        <span>Nuevo</span>
                    </button>
                    <button class="menu-btn" id="templates-btn">
                        <i class="ri-layout-masonry-line"></i>
                        <span>Plantillas</span>
                    </button>
                    <button class="menu-btn" id="save-btn">
                        <i class="ri-save-3-line"></i>
                        <span>Guardar</span>
                    </button>
                    <button class="menu-btn premium" id="export-btn">
                        <i class="ri-download-2-line"></i>
                        <span>Exportar</span>
                    </button>
                </div>
            </div>
            
            <div class="header-center">
                <!-- Selector de Dispositivo Premium -->
                <div class="device-selector">
                    <button class="device-btn active" data-device="desktop">
                        <i class="ri-computer-line"></i>
                        <span>Desktop</span>
                    </button>
                    <button class="device-btn" data-device="tablet">
                        <i class="ri-tablet-line"></i>
                        <span>Tablet</span>
                    </button>
                    <button class="device-btn" data-device="mobile">
                        <i class="ri-smartphone-line"></i>
                        <span>Mobile</span>
                    </button>
                </div>
                
                <div class="zoom-controls">
                    <button class="control-btn" id="zoom-out">
                        <i class="ri-zoom-out-line"></i>
                    </button>
                    <div class="zoom-display">
                        <span id="zoom-level">100%</span>
                    </div>
                    <button class="control-btn" id="zoom-in">
                        <i class="ri-zoom-in-line"></i>
                    </button>
                    <button class="control-btn" id="fit-to-screen">
                        <i class="ri-fullscreen-line"></i>
                    </button>
                </div>
            </div>

            <div class="header-right">
                <button class="action-btn" id="components-btn">
                    <i class="ri-box-3-line"></i>
                    <span>Componentes</span>
                </button>
                <button class="action-btn" id="assets-btn">
                    <i class="ri-image-2-line"></i>
                    <span>Assets</span>
                </button>
                <button class="action-btn primary" id="ai-assistant-btn" data-feature="ai-assistant">
  <i class="ri-robot-2-line"></i>
  <span>AI Assistant</span>
</button>
                <button class="action-btn premium" id="preview-btn">
                    <i class="ri-eye-line"></i>
                    <span>Preview</span>
                </button>
                <div class="user-menu">
                    <button class="user-btn">
                        <i class="ri-user-3-line"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-container">
            <!-- Sidebar Izquierdo - Herramientas Premium -->
            <div class="sidebar left-sidebar">
                <!-- Sección de Herramientas -->
                <div class="tool-section">
                    <div class="section-header">
                        <h3><i class="ri-tools-line"></i> Herramientas</h3>
                    </div>
                    <div class="tool-grid">
                        <button class="tool-btn active" data-tool="select" title="Seleccionar (V)">
                            <div class="tool-icon">
                                <i class="ri-cursor-line"></i>
                            </div>
                            <span class="tool-label">Seleccionar</span>
                            <span class="tool-shortcut">V</span>
                        </button>
                        <button class="tool-btn" data-tool="frame" title="Frame (F)">
                            <div class="tool-icon">
                                <i class="ri-layout-line"></i>
                            </div>
                            <span class="tool-label">Frame</span>
                            <span class="tool-shortcut">F</span>
                        </button>
                        <button class="tool-btn" data-tool="rectangle" title="Rectángulo (R)">
                            <div class="tool-icon">
                                <i class="ri-checkbox-blank-line"></i>
                            </div>
                            <span class="tool-label">Rectángulo</span>
                            <span class="tool-shortcut">R</span>
                        </button>
                        <button class="tool-btn" data-tool="circle" title="Círculo (O)">
                            <div class="tool-icon">
                                <i class="ri-checkbox-blank-circle-line"></i>
                            </div>
                            <span class="tool-label">Círculo</span>
                            <span class="tool-shortcut">O</span>
                        </button>
                        <button class="tool-btn" data-tool="text" title="Texto (T)">
                            <div class="tool-icon">
                                <i class="ri-text-line"></i>
                            </div>
                            <span class="tool-label">Texto</span>
                            <span class="tool-shortcut">T</span>
                        </button>
                        <button class="tool-btn" data-tool="line" title="Línea (L)">
                            <div class="tool-icon">
                                <i class="ri-minimize-line"></i>
                            </div>
                            <span class="tool-label">Línea</span>
                            <span class="tool-shortcut">L</span>
                        </button>
                        <button class="tool-btn" data-tool="pen" title="Pluma (P)">
                            <div class="tool-icon">
                                <i class="ri-edit-2-line"></i>
                            </div>
                            <span class="tool-label">Pluma</span>
                            <span class="tool-shortcut">P</span>
                        </button>
                        <button class="tool-btn premium" data-tool="shape" title="Formas (S)">
                            <div class="tool-icon">
                                <i class="ri-heart-line"></i>
                            </div>
                            <span class="tool-label">Formas</span>
                            <span class="tool-shortcut">S</span>
                        </button>
                    </div>
                </div>

                <!-- Sección de Componentes Rápidos -->
                <div class="tool-section">
                    <div class="section-header">
                        <h3><i class="ri-box-3-line"></i> Componentes</h3>
                        <button class="icon-btn" id="add-component">
                            <i class="ri-add-line"></i>
                        </button>
                    </div>
                    <div class="quick-components">
                        <button class="component-btn" data-component="primary-button">
                            <div class="component-preview" style="background: linear-gradient(135deg, #6366f1, #8b5cf6);"></div>
                            <div class="component-info">
                                <span class="component-name">Botón Primario</span>
                                <span class="component-type">Button</span>
                            </div>
                            <i class="ri-draggable"></i>
                        </button>
                        <button class="component-btn" data-component="card-modern">
                            <div class="component-preview" style="background: linear-gradient(135deg, #10b981, #34d399);"></div>
                            <div class="component-info">
                                <span class="component-name">Card Moderno</span>
                                <span class="component-type">Card</span>
                            </div>
                            <i class="ri-draggable"></i>
                        </button>
                        <button class="component-btn" data-component="navbar">
                            <div class="component-preview" style="background: linear-gradient(135deg, #f59e0b, #fbbf24);"></div>
                            <div class="component-info">
                                <span class="component-name">Navbar</span>
                                <span class="component-type">Navigation</span>
                            </div>
                            <i class="ri-draggable"></i>
                        </button>
                        <button class="component-btn premium" data-component="pricing-card">
                            <div class="component-preview" style="background: linear-gradient(135deg, #8b5cf6, #a855f7);">
                                <i class="ri-crown-line"></i>
                            </div>
                            <div class="component-info">
                                <span class="component-name">Pricing Card</span>
                                <span class="component-type">Premium</span>
                            </div>
                            <i class="ri-draggable"></i>
                        </button>
                    </div>
                </div>

                <!-- Sección de Capas Avanzada -->
                <div class="tool-section">
                    <div class="section-header">
                        <h3><i class="ri-stack-line"></i> Capas</h3>
                        <div class="layer-actions">
                            <button class="icon-btn" id="add-layer" title="Nueva capa">
                                <i class="ri-add-line"></i>
                            </button>
                            <button class="icon-btn" id="group-layers" title="Agrupar capas">
                                <i class="ri-node-tree"></i>
                            </button>
                        </div>
                    </div>
                    <div class="layers-container">
                        <div class="layers-toolbar">
                            <button class="layer-filter active">Todos</button>
                            <button class="layer-filter">Seleccionados</button>
                            <button class="layer-filter">Grupos</button>
                        </div>
                        <div id="layers-list" class="layers-list">
                            <!-- Las capas se cargan aquí dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Área de Trabajo Premium -->
            <div class="workspace">
                <div class="workspace-header">
                    <div class="workspace-info">
                        <div class="project-info">
                            <span class="project-name">Proyecto Sin Título</span>
                            <div class="project-status">
                                <i class="ri-checkbox-circle-line"></i>
                                <span>Guardado</span>
                            </div>
                        </div>
                        <div class="device-info">
                            <i class="ri-information-line"></i>
                            <span id="current-size">1440×1024 - Desktop</span>
                        </div>
                    </div>
                    <div class="workspace-controls">
                        <div class="view-controls-group">
                            <button class="control-btn" id="show-grid" title="Mostrar grid (G)">
                                <i class="ri-grid-line"></i>
                            </button>
                            <button class="control-btn" id="show-rulers" title="Mostrar reglas (R)">
                                <i class="ri-ruler-line"></i>
                            </button>
                            <button class="control-btn" id="show-guides" title="Mostrar guías">
                                <i class="ri-guide-line"></i>
                            </button>
                        </div>
                        <div class="collaboration-status">
                            <div class="collaborators">
                                <div class="avatar">A</div>
                                <div class="avatar">B</div>
                                <div class="avatar">+2</div>
                            </div>
                            <button class="collab-btn">
                                <i class="ri-share-line"></i>
                                <span>Compartir</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="canvas-container">
                    <div class="canvas-controls">
                        <div class="coordinate-display">
                            <span>X: <span id="cursor-x">0</span></span>
                            <span>Y: <span id="cursor-y">0</span></span>
                        </div>
                        <div class="history-controls">
                            <button class="history-btn" id="undo-btn" title="Deshacer (Ctrl+Z)">
                                <i class="ri-arrow-go-back-line"></i>
                            </button>
                            <button class="history-btn" id="redo-btn" title="Rehacer (Ctrl+Y)">
                                <i class="ri-arrow-go-forward-line"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="device-frame" id="device-frame">
                        <div class="device-header">
                            <div class="device-dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <div class="device-url">editorpro.design</div>
                            <div class="device-actions">
                                <i class="ri-refresh-line"></i>
                                <i class="ri-more-2-fill"></i>
                            </div>
                        </div>
                        <div class="device-mockup" id="device-mockup">
                            <canvas id="main-canvas"></canvas>
                        </div>
                        <div class="grid-overlay" id="grid-overlay"></div>
                    </div>
                </div>
            </div>

            <!-- Sidebar Derecho - Propiedades Premium -->
            <div class="sidebar right-sidebar">
                <!-- Panel de Propiedades Avanzado -->
                <div class="properties-panel">
                    <div class="section-header">
                        <h3><i class="ri-settings-3-line"></i> Propiedades</h3>
                        <button class="icon-btn" id="reset-properties">
                            <i class="ri-restart-line"></i>
                        </button>
                    </div>
                    
                    <!-- Propiedades de Diseño -->
                    <div class="property-group">
                        <div class="property-header">
                            <i class="ri-layout-line"></i>
                            <label class="property-label">Diseño</label>
                        </div>
                        <div class="property-grid">
                            <div class="property-field">
                                <label>Posición X</label>
                                <div class="input-with-actions">
                                    <input type="number" id="element-x" value="0">
                                    <button class="input-action"><i class="ri-lock-line"></i></button>
                                </div>
                            </div>
                            <div class="property-field">
                                <label>Posición Y</label>
                                <div class="input-with-actions">
                                    <input type="number" id="element-y" value="0">
                                    <button class="input-action"><i class="ri-lock-line"></i></button>
                                </div>
                            </div>
                            <div class="property-field">
                                <label>Ancho</label>
                                <div class="input-with-actions">
                                    <input type="number" id="element-width" value="100">
                                    <button class="input-action"><i class="ri-link-m"></i></button>
                                </div>
                            </div>
                            <div class="property-field">
                                <label>Alto</label>
                                <div class="input-with-actions">
                                    <input type="number" id="element-height" value="80">
                                    <button class="input-action"><i class="ri-link-m"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ...rest of file unchanged... -->
    </div>

        </div>

   <!-- socket loader (intenta local, luego CDN) -->
<script src="public/socket-loader.js" defer></script>

<!-- stub/guards que previenen redeclaraciones y no-op para globals -->
<script src="public/guards.js" defer></script>

<!-- Analytics (debe inicializar global DesignAnalytics) -->
<script src="public/analytics.js" defer></script>

<!-- Core -->
<script src="public/init-core.js" defer></script>

<!-- Enhanced tools: prefer lazy-load desde init-core o loadPremiumFeature -->
<script src="public/enhanced-tools-simple.js" defer></script>

<!-- Init final -->
<script src="public/init-complete.js" defer></script>
</body>
</html>
